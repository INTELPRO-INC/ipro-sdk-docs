---
layout: default
title: 應用範例
---

<div class="doc-layout">
    <aside class="doc-sidebar">
        <nav class="sidebar-nav">
            <h4 class="sidebar-title">本頁目錄</h4>
            <ul class="sidebar-links">
                <li><a href="#overview" class="sidebar-link">應用概覽</a></li>
                <li><a href="#ipro-ble-demo" class="sidebar-link">ipro_ble_demo</a></li>
                <li><a href="#ipro-zephyr-demo" class="sidebar-link">ipro_zephyr_demo</a></li>
                <li><a href="#ipro7-fpga-ble" class="sidebar-link">ipro7_fpga_ble_5p4</a></li>
                <li><a href="#ipro7-demo" class="sidebar-link">ipro7_demo</a></li>
                <li><a href="#ipro7-phyrf" class="sidebar-link">ipro7_phyrf_test</a></li>
                <li><a href="#creating-apps" class="sidebar-link">建立新應用</a></li>
            </ul>
        </nav>
    </aside>
    
    <article class="doc-content">
        <h1>應用範例</h1>
        <p>IPRO SDK 提供多個完整的參考應用，展示各種功能的最佳實踐。每個應用都可以直接建構、燒錄並測試。</p>
        
        <section id="overview">
            <h2>應用概覽</h2>
            
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>應用名稱</th>
                            <th>RTOS</th>
                            <th>主要功能</th>
                            <th>適用場景</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>ipro_ble_demo</code></td>
                            <td>FreeRTOS</td>
                            <td>BLE 5.4, LE Audio, CLI</td>
                            <td>BLE 應用開發起點</td>
                        </tr>
                        <tr>
                            <td><code>ipro_zephyr_demo</code></td>
                            <td>Zephyr</td>
                            <td>Zephyr RTOS 整合</td>
                            <td>現代 RTOS 開發</td>
                        </tr>
                        <tr>
                            <td><code>ipro7_fpga_ble_5p4</code></td>
                            <td>FreeRTOS</td>
                            <td>FPGA 優化 BLE</td>
                            <td>高效能 BLE 需求</td>
                        </tr>
                        <tr>
                            <td><code>ipro7_demo</code></td>
                            <td>FreeRTOS</td>
                            <td>多媒體、USB、週邊驅動</td>
                            <td>SDK 入門與硬體測試</td>
                        </tr>
                        <tr>
                            <td><code>ipro7_phyrf_test</code></td>
                            <td>FreeRTOS</td>
                            <td>RF 測試工具</td>
                            <td>射頻調校與測試</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
        
        <section id="ipro-ble-demo">
            <h2>ipro_ble_demo ⭐</h2>
            <p>最完整的 BLE 展示應用，推薦作為 BLE 開發的起點。</p>
            
            <h3>功能特色</h3>
            <ul>
                <li><strong>Core/Profile 架構</strong>：清晰的層次分離，易於擴展</li>
                <li><strong>多服務支援</strong>：Heart Rate, Battery, UART, Device Info</li>
                <li><strong>LE Audio</strong>：GAF 框架整合，LC3 編解碼支援</li>
                <li><strong>完整 CLI</strong>：40+ 互動指令用於測試與除錯</li>
                <li><strong>自動重連</strong>：斷線後自動恢復廣播</li>
                <li><strong>OTA 更新</strong>：支援無線韌體更新功能</li>
            </ul>
            
            <h3>目錄結構</h3>
            <div class="code-block">
                <div class="code-block-header">
                    <span class="code-block-title">ipro_ble_demo 結構</span>
                </div>
                <pre><code>apps/ipro_ble_demo/
├── main.c                    # 應用入口
├── ipro_ble_demo_app.c       # BLE 應用邏輯
├── ipro_ble_demo_cli.c       # CLI 指令實作
├── include/
│   └── ipro_ble_demo_app.h   # 頭文件
├── CMakeLists.txt            # 建構配置
├── proj.conf                 # Kconfig 配置
├── debug.cfg                 # OpenOCD 除錯配置
├── README.md                 # 應用文件
├── BLE_DEMO_CLI_GUIDE.md     # CLI 使用指南
└── CLI_QUICK_REFERENCE.md    # CLI 快速參考</code></pre>
            </div>
            
            <h3>建構與執行</h3>
            <div class="code-block">
                <div class="code-block-header">
                    <span class="code-block-title">建構 BLE Demo</span>
                    <button class="code-copy-btn"><i class="fas fa-copy"></i></button>
                </div>
                <pre><code class="language-bash"># 建構
./build_freertos.sh ipro_ble_demo

# 燒錄
openocd -f apps/ipro_ble_demo/debug.cfg \
    -c "program apps/ipro_ble_demo/build/build_out/ipro_ble_demo.elf verify reset exit"</code></pre>
            </div>
            
            <h3>CLI 指令範例</h3>
            <div class="code-block">
                <div class="code-block-header">
                    <span class="code-block-title">常用 CLI 指令</span>
                    <button class="code-copy-btn"><i class="fas fa-copy"></i></button>
                </div>
                <pre><code class="language-bash"># 系統資訊
help                  # 顯示所有指令
ble status            # BLE 狀態

# 廣播控制
ble adv start         # 開始廣播
ble adv stop          # 停止廣播
ble adv data          # 顯示廣播資料

# 連線管理
ble conn list         # 列出連線
ble conn info 0       # 連線詳情
ble conn disconnect 0 # 斷開連線

# 服務操作
ble hrs update 80     # 更新心率
ble bas update 75     # 更新電量
ble uart send "Hello" # 發送 UART 資料</code></pre>
            </div>
            
            <h3>配置選項</h3>
            <div class="code-block">
                <div class="code-block-header">
                    <span class="code-block-title">proj.conf 重要配置</span>
                    <button class="code-copy-btn"><i class="fas fa-copy"></i></button>
                </div>
                <pre><code class="language-bash"># BLE 功能
CONFIG_IPRO_BLE_LIB_ENABLE=y
CONFIG_IPRO_BLE_LIB_DEBUG_ENABLE=y

# 服務啟用
CONFIG_IPRO_BLE_HRS_ENABLE=y
CONFIG_IPRO_BLE_BAS_ENABLE=y
CONFIG_IPRO_BLE_DIS_ENABLE=y
CONFIG_IPRO_BLE_UART_ENABLE=y

# LE Audio（選用）
CONFIG_IPRO_BLE_AUDIO_ENABLE=y</code></pre>
            </div>
        </section>
        
        <section id="ipro-zephyr-demo">
            <h2>ipro_zephyr_demo 🌊</h2>
            <p>Zephyr RTOS 整合展示，展示現代化 RTOS 開發方式。</p>
            
            <h3>功能特色</h3>
            <ul>
                <li><strong>Zephyr v3.4.0</strong>：完整 RTOS 功能</li>
                <li><strong>Device Tree</strong>：宣告式硬體配置</li>
                <li><strong>West 建構</strong>：現代化專案管理</li>
                <li><strong>記憶體優化</strong>：33KB ROM, 27KB RAM</li>
                <li><strong>快速建構</strong>：約 30 秒完成</li>
            </ul>
            
            <h3>建構與執行</h3>
            <div class="code-block">
                <div class="code-block-header">
                    <span class="code-block-title">建構 Zephyr Demo</span>
                    <button class="code-copy-btn"><i class="fas fa-copy"></i></button>
                </div>
                <pre><code class="language-bash"># 使用建構腳本
./tools/zephyr/build.sh -a ipro_zephyr_demo -b ipro7_fpga -c

# 或使用 west
cd zephyr-workspace
source setup_env.sh
west build -b ipro7_fpga ../apps/ipro_zephyr_demo</code></pre>
            </div>
            
            <h3>主程式範例</h3>
            <div class="code-block">
                <div class="code-block-header">
                    <span class="code-block-title">main.c</span>
                    <button class="code-copy-btn"><i class="fas fa-copy"></i></button>
                </div>
                <pre><code class="language-c">#include &lt;zephyr/kernel.h&gt;
#include &lt;zephyr/logging/log.h&gt;

LOG_MODULE_REGISTER(ipro_zephyr, LOG_LEVEL_INF);

int main(void)
{
    LOG_INF("IPRO Zephyr Demo Started!");
    LOG_INF("Board: %s", CONFIG_BOARD);
    
    while (1) {
        LOG_INF("Running...");
        k_sleep(K_SECONDS(1));
    }
    
    return 0;
}</code></pre>
            </div>
        </section>
        
        <section id="ipro7-fpga-ble">
            <h2>ipro7_fpga_ble_5p4</h2>
            <p>FPGA 優化的 BLE 5.4 實作，適合需要高效能 BLE 處理的場景。</p>
            
            <h3>功能特色</h3>
            <ul>
                <li><strong>硬體加速</strong>：FPGA 加速 BLE 處理</li>
                <li><strong>週期性廣播</strong>：Periodic Advertising 支援</li>
                <li><strong>同步串流</strong>：Isochronous Streams</li>
                <li><strong>效能優化</strong>：針對 FPGA 環境調校</li>
            </ul>
            
            <h3>建構</h3>
            <div class="code-block">
                <div class="code-block-header">
                    <span class="code-block-title">建構 FPGA BLE</span>
                    <button class="code-copy-btn"><i class="fas fa-copy"></i></button>
                </div>
                <pre><code class="language-bash">./build_freertos.sh ipro7_fpga_ble_5p4</code></pre>
            </div>
        </section>
        
        <section id="ipro7-demo">
            <h2>ipro7_demo</h2>
            <p>綜合平台展示應用，展示 SDK 完整功能，包含多媒體、USB 和週邊驅動。</p>
            
            <h3>功能特色</h3>
            <ul>
                <li><strong>週邊驅動</strong>：GPIO, UART, SPI (主/從), I2C, PWM, ADC, DAC</li>
                <li><strong>USB 裝置</strong>：CDC, MSC, HID, UAC (音訊), UVC (視訊) via CherryUSB</li>
                <li><strong>多媒體</strong>：ISP 攝影機, MJPEG 編解碼, LCD 顯示 (ILI9488)</li>
                <li><strong>音訊</strong>：AUADC 音訊輸入, DAC 喇叭輸出</li>
                <li><strong>網路</strong>：EMAC 乙太網, lwIP 協定棧, iPerf 測試</li>
                <li><strong>儲存</strong>：SD 卡 (SDH), FatFS 檔案系統</li>
                <li><strong>FreeRTOS</strong>：多任務管理與執行時間統計</li>
            </ul>
            
            <h3>建構</h3>
            <div class="code-block">
                <div class="code-block-header">
                    <span class="code-block-title">建構平台 Demo</span>
                    <button class="code-copy-btn"><i class="fas fa-copy"></i></button>
                </div>
                <pre><code class="language-bash">./build_freertos.sh ipro7_demo</code></pre>
            </div>
            
            <h3>proj.conf 配置範例</h3>
            <div class="code-block">
                <div class="code-block-header">
                    <span class="code-block-title">啟用 USB 和多媒體功能</span>
                    <button class="code-copy-btn"><i class="fas fa-copy"></i></button>
                </div>
                <pre><code class="language-properties"># USB Device 配置
CONFIG_COMPONENTS_CHERRYUSB_ENABLE=y
CONFIG_CHERRYUSB_DEVICE=y
CONFIG_CHERRYUSB_DEVICE_CDC=y
CONFIG_CHERRYUSB_DEVICE_MSC=y
CONFIG_CHERRYUSB_DEVICE_AUDIO=y
CONFIG_CHERRYUSB_DEVICE_VIDEO=y

# 檔案系統
CONFIG_COMPONENTS_FATFS_ENABLE=y
CONFIG_COMPONENTS_VFS_ENABLE=y

# 感測器和工具
CONFIG_COMPONENTS_SENSOR_ENABLE=y
CONFIG_CLI_CMD_ENABLE=y</code></pre>
            </div>
            
            <h3>程式碼範例</h3>
            <div class="code-block">
                <div class="code-block-header">
                    <span class="code-block-title">GPIO 使用範例</span>
                    <button class="code-copy-btn"><i class="fas fa-copy"></i></button>
                </div>
                <pre><code class="language-c">#include "ipro_hal_gpio.h"

void gpio_example(void)
{
    // 配置 GPIO 為輸出
    ipro_gpio_config_t config = {
        .mode = IPRO_GPIO_MODE_OUTPUT,
        .pull = IPRO_GPIO_PULL_NONE,
    };
    ipro_hal_gpio_init(GPIO_PIN_0, &config);
    
    // 設置輸出
    ipro_hal_gpio_write(GPIO_PIN_0, 1);
    
    // 讀取輸入
    uint8_t value = ipro_hal_gpio_read(GPIO_PIN_1);
}</code></pre>
            </div>
        </section>
        
        <section id="ipro7-phyrf">
            <h2>ipro7_phyrf_test</h2>
            <p>RF 測試與校準工具，用於射頻特性驗證。</p>
            
            <h3>功能特色</h3>
            <ul>
                <li><strong>RF 特性測試</strong>：發射功率、靈敏度測量</li>
                <li><strong>天線測試</strong>：天線匹配驗證</li>
                <li><strong>頻率校準</strong>：晶振校準工具</li>
                <li><strong>效能驗證</strong>：吞吐量與延遲測試</li>
            </ul>
            
            <h3>建構</h3>
            <div class="code-block">
                <div class="code-block-header">
                    <span class="code-block-title">建構 RF 測試</span>
                    <button class="code-copy-btn"><i class="fas fa-copy"></i></button>
                </div>
                <pre><code class="language-bash">./build_freertos.sh ipro7_phyrf_test</code></pre>
            </div>
        </section>
        
        <section id="creating-apps">
            <h2>建立新應用</h2>
            <p>按照以下步驟建立您自己的應用程式。</p>
            
            <h3>步驟 1：建立目錄</h3>
            <div class="code-block">
                <div class="code-block-header">
                    <span class="code-block-title">建立應用目錄</span>
                    <button class="code-copy-btn"><i class="fas fa-copy"></i></button>
                </div>
                <pre><code class="language-bash">mkdir -p apps/my_app/include</code></pre>
            </div>
            
            <h3>步驟 2：建立 CMakeLists.txt</h3>
            <div class="code-block">
                <div class="code-block-header">
                    <span class="code-block-title">apps/my_app/CMakeLists.txt</span>
                    <button class="code-copy-btn"><i class="fas fa-copy"></i></button>
                </div>
                <pre><code class="language-cmake">cmake_minimum_required(VERSION 3.13)

# 設置應用名稱
set(APP_NAME my_app)

# 包含 SDK 建構系統
include(${IPRO_SDK_BASE}/cmake/extension.cmake)

# 添加原始檔
target_sources(app PRIVATE
    main.c
)

# 添加頭文件目錄
target_include_directories(app PRIVATE
    include
)</code></pre>
            </div>
            
            <h3>步驟 3：建立 proj.conf</h3>
            <div class="code-block">
                <div class="code-block-header">
                    <span class="code-block-title">apps/my_app/proj.conf</span>
                    <button class="code-copy-btn"><i class="fas fa-copy"></i></button>
                </div>
                <pre><code class="language-bash"># 基本配置
CONFIG_LOG_DEFAULT_LEVEL=3

# 根據需要啟用元件
# CONFIG_IPRO_BLE_LIB_ENABLE=y
# CONFIG_LWIP_ENABLE=y</code></pre>
            </div>
            
            <h3>步驟 4：建立主程式</h3>
            <div class="code-block">
                <div class="code-block-header">
                    <span class="code-block-title">apps/my_app/main.c</span>
                    <button class="code-copy-btn"><i class="fas fa-copy"></i></button>
                </div>
                <pre><code class="language-c">#include &lt;stdio.h&gt;
#include "FreeRTOS.h"
#include "task.h"
#include "ipro_log.h"

#define TAG "MY_APP"

void app_task(void *params)
{
    IPRO_LOG_INFO(TAG, "My App Started!");
    
    while (1) {
        IPRO_LOG_INFO(TAG, "Running...");
        vTaskDelay(pdMS_TO_TICKS(1000));
    }
}

int main(void)
{
    // 系統初始化
    system_init();
    
    // 建立應用任務
    xTaskCreate(app_task, "app", 4096, NULL, 5, NULL);
    
    // 啟動排程器
    vTaskStartScheduler();
    
    return 0;
}</code></pre>
            </div>
            
            <h3>步驟 5：建構</h3>
            <div class="code-block">
                <div class="code-block-header">
                    <span class="code-block-title">建構新應用</span>
                    <button class="code-copy-btn"><i class="fas fa-copy"></i></button>
                </div>
                <pre><code class="language-bash">./build_freertos.sh my_app</code></pre>
            </div>
            
            <div class="alert alert-success">
                <strong>✅ 完成！</strong>您的新應用已建立，可以開始開發了。
            </div>
        </section>
    </article>
</div>
